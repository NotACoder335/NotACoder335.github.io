<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IRCTC Alerts</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#2c7c96",
              "primary-dark": "#236378",
              "background-light": "#fafaf9",
              "background-dark": "#161b1d",
              "surface-light": "#ffffff",
              "surface-dark": "#1e2528",
              "text-main": "#2D3540",
              "text-muted": "#6b7280",
              "alert-red": "#E06D7C",
              "status-green": "#4B9C5D",
              "status-orange": "#F59E0B",
              "status-teal": "#2c7c96",
              "status-grey": "#9CA3AF",
            },
            fontFamily: {
              display: ["Manrope", "sans-serif"],
            },
            keyframes: {
              ticker: {
                "0%": { transform: "translateX(0%)" },
                "100%": { transform: "translateX(-50%)" },
              },
              slideDown: {
                "0%": { opacity: "0", transform: "translateY(-10px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
            },
            animation: {
              ticker: "ticker 30s linear infinite",
              slideDown: "slideDown 0.3s ease-out forwards",
            },
          },
        },
      };
    </script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      body {
        font-family: 'Manrope', sans-serif;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      /* Force hide the native calendar icon */
      input[type="date"]::-webkit-calendar-picker-indicator {
          display: none !important;
          -webkit-appearance: none;
      }
      .accordion-content {
        display: grid;
        grid-template-rows: 0fr;
        transition: grid-template-rows 0.3s ease-out, opacity 0.3s ease-out;
        opacity: 0;
      }
      .accordion-content.open {
        grid-template-rows: 1fr;
        opacity: 1;
      }
      .accordion-inner {
        overflow: hidden;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-background-light dark:bg-background-dark text-text-main dark:text-gray-100 transition-colors duration-300">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 transition-colors duration-300">
        <div class="px-4 md:px-10 py-3 max-w-[1200px] mx-auto flex items-center justify-between">
            <div class="flex items-center gap-4 text-text-main dark:text-white">
                <div class="size-8 bg-primary rounded-lg flex items-center justify-center text-white">
                    <i data-lucide="train-front" class="w-5 h-5"></i>
                </div>
                <h2 class="text-xl font-bold leading-tight tracking-tight text-primary dark:text-gray-100">
                    IRCTC <span class="text-text-main dark:text-gray-400 font-normal">Alerts</span>
                </h2>
            </div>

            <div class="hidden md:flex flex-1 justify-end gap-8 items-center">
                <nav class="flex items-center gap-6">
                    <a href="#" class="text-sm font-semibold hover:text-primary transition-colors">Home</a>
                    <a href="#" class="text-sm font-medium text-text-muted hover:text-primary transition-colors">Trains</a>
                    <a href="#" class="text-sm font-medium text-text-muted hover:text-primary transition-colors">Help</a>
                </nav>
                
                <div class="h-6 w-px bg-gray-200 dark:bg-gray-700"></div>
                
                <div class="flex items-center gap-4">
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-text-main dark:text-gray-200" aria-label="Toggle Dark Mode">
                        <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                    
                    <button class="flex items-center justify-center rounded-lg h-9 px-4 bg-primary hover:bg-primary-dark text-white text-sm font-bold transition-colors shadow-sm">
                        Login
                    </button>
                    <div 
                        class="bg-center bg-no-repeat bg-cover rounded-full size-9 ring-2 ring-gray-100 dark:ring-gray-700 cursor-pointer" 
                        style="background-image: url('https://picsum.photos/100/100')"
                        role="img"
                        aria-label="User Avatar"
                    ></div>
                </div>
            </div>

            <div class="md:hidden flex items-center gap-3">
                <button id="mobile-theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-text-main dark:text-white">
                    <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
                    <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                </button>
                <button class="text-text-main dark:text-white p-1">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Alert Ticker -->
    <div class="bg-alert-red text-white overflow-hidden relative h-10 flex items-center">
        <div class="flex whitespace-nowrap animate-ticker w-max">
            <!-- Repeated items for ticker effect -->
            <span class="mx-4 font-bold tracking-wide flex items-center gap-2">
                <i data-lucide="triangle-alert" class="w-4 h-4 fill-current"></i>
                URGENT: Heavy fog reported in Northern Region. Multiple diversions expected. Check status before travel.
            </span>
            <span class="mx-4 font-bold tracking-wide flex items-center gap-2">
                <i data-lucide="triangle-alert" class="w-4 h-4 fill-current"></i>
                URGENT: Heavy fog reported in Northern Region. Multiple diversions expected. Check status before travel.
            </span>
            <span class="mx-4 font-bold tracking-wide flex items-center gap-2">
                <i data-lucide="triangle-alert" class="w-4 h-4 fill-current"></i>
                URGENT: Heavy fog reported in Northern Region. Multiple diversions expected. Check status before travel.
            </span>
            <span class="mx-4 font-bold tracking-wide flex items-center gap-2">
                <i data-lucide="triangle-alert" class="w-4 h-4 fill-current"></i>
                URGENT: Heavy fog reported in Northern Region. Multiple diversions expected. Check status before travel.
            </span>
        </div>
        <!-- Gradient Fade Edges -->
        <div class="absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-alert-red to-transparent z-10"></div>
        <div class="absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-alert-red to-transparent z-10"></div>
    </div>

    <!-- Main Content -->
    <main class="flex-1 w-full max-w-[960px] mx-auto px-4 md:px-6 py-8">
        
        <!-- Control Panel (Changed from sticky to relative) -->
        <div class="relative z-40 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur pb-4 pt-2 -mx-4 px-4 md:-mx-6 md:px-6 border-b border-transparent transition-all duration-300">
            
            <!-- Top Row -->
            <div class="flex flex-col md:flex-row gap-4 items-stretch md:items-center justify-between mb-4">
                
                <!-- Search -->
                <div class="relative flex-1 max-w-2xl group">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i data-lucide="search" class="w-5 h-5 text-primary group-focus-within:text-primary-dark transition-colors"></i>
                    </div>
                    <input
                        type="text"
                        class="block w-full pl-10 pr-12 py-3 border-none rounded-lg leading-5 bg-white dark:bg-surface-dark text-text-main dark:text-gray-200 placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary/50 shadow-sm sm:text-sm transition-shadow"
                        placeholder="Search by train number, station code, or keyword..."
                    />
                    <div class="absolute inset-y-0 right-0 pr-2 flex items-center">
                        <kbd class="hidden sm:inline-flex items-center gap-1 border border-gray-200 dark:border-gray-700 rounded px-2 py-0.5 text-xs font-medium text-gray-400">
                           <i data-lucide="command" class="w-2.5 h-2.5"></i> K
                        </kbd>
                    </div>
                </div>

                <!-- Right Actions -->
                <div class="flex items-center justify-end gap-3">
                    <!-- Date Picker -->
                    <div class="relative cursor-pointer group" onclick="document.getElementById('date-input').showPicker()">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10 text-primary group-hover:text-primary-dark transition-colors">
                            <i data-lucide="calendar" class="w-[18px] h-[18px]"></i>
                        </div>
                        <input 
                            id="date-input"
                            type="date"
                            class="appearance-none bg-white dark:bg-surface-dark border-none text-text-main dark:text-gray-200 py-3 pl-10 pr-3 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm font-medium cursor-pointer min-w-[140px] dark:[color-scheme:dark]"
                        />
                    </div>

                    <!-- Sort -->
                    <div class="relative">
                        <select 
                            id="sort-select"
                            class="appearance-none bg-white dark:bg-surface-dark border-none text-text-main dark:text-gray-200 py-3 pl-4 pr-10 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm font-medium cursor-pointer min-w-[150px]"
                        >
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-primary">
                            <i data-lucide="list-filter" class="w-5 h-5"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filter Chips Wrapper with External Scroll Indicators -->
            <div class="flex items-center gap-1">
                <!-- Left Indicator (Outside) -->
                <button id="scroll-left-btn" class="md:hidden flex-none p-2 text-primary hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all duration-200 disabled:opacity-0 disabled:pointer-events-none" aria-label="Scroll Left">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>

                <!-- Filter Chips -->
                <div id="filter-container" class="flex-1 flex gap-2 overflow-x-auto scrollbar-hide pb-2 px-1 scroll-smooth">
                    <!-- Generated by JS -->
                </div>

                <!-- Right Indicator (Outside) -->
                <button id="scroll-right-btn" class="md:hidden flex-none p-2 text-primary hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all duration-200 disabled:opacity-0 disabled:pointer-events-none" aria-label="Scroll Right">
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
            </div>
            
        </div>

        <!-- Dynamic Content Area -->
        <div id="main-content" class="mt-6 min-h-[400px]">
            <!-- Content Injected by JS -->
        </div>

        <!-- Load More Button -->
        <div id="load-more-container" class="mt-8 flex justify-center pb-12 hidden">
            <button 
                id="load-more-btn"
                class="bg-white dark:bg-surface-dark hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 text-text-main dark:text-gray-200 font-semibold py-3 px-12 rounded-lg shadow-sm w-full max-w-xs transition-all active:scale-95 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed"
            >
                <i data-lucide="refresh-cw" class="w-5 h-5 text-primary"></i>
                <span id="load-more-text">Load More</span>
            </button>
        </div>

    </main>

    <!-- Scroll to Top Button -->
    <button 
        id="scroll-to-top" 
        class="fixed bottom-6 right-6 p-3 bg-primary text-white rounded-full shadow-lg hover:bg-primary-dark transition-all duration-300 opacity-0 invisible translate-y-10 z-50" 
        aria-label="Scroll to top"
    >
        <i data-lucide="arrow-up" class="w-6 h-6"></i>
    </button>

    <script>
        // --- DATA ---
        const CONTENT_DATA = [
            { id: '1', category: 'alerts', type: 'rescheduled', title: '12951 - Rajdhani Express', tagLabel: 'Rescheduled', timestamp: 'Today, 10:45 AM', subtitle: 'Source: Vadodara Jn', details: 'Train has been rescheduled by 02:30 hrs due to technical snag at Vadodara Jn. The train is now expected to depart at 19:30 instead of 17:00. Inconvenience caused is deeply regretted. Catering services will be provided at the station.', links: [{ label: 'Track Live Status', url: '#' }, { label: 'View Refund Rules', url: '#' }] },
            { id: '2', category: 'alerts', type: 'platform_change', title: 'New Delhi (NDLS)', tagLabel: 'Platform Change', timestamp: 'Today, 09:15 AM', details: 'Platform 14 is currently under unscheduled maintenance. All trains scheduled for Platform 14, including the 12004 Shatabdi Express, have been diverted to Platform 5 until 18:00 hrs. Please check display boards for real-time updates.', links: [{ label: 'Station Map', url: '#' }] },
            { id: '3', category: 'alerts', type: 'cancelled', title: '12002 - Bhopal Shatabdi', tagLabel: 'Cancelled', timestamp: 'Yesterday, 11:30 PM', subtitle: 'Fog Impact', details: 'Train fully cancelled due to dense fog conditions persisting in the Northern Region. Passengers are entitled to a full refund. Automatic refund process has been initiated for online tickets. Counter ticket holders please visit nearest PRS counter.' },
            { id: 'a4', category: 'alerts', type: 'info', title: 'Secunderabad Jn (SC)', tagLabel: 'Crowd Alert', timestamp: 'Yesterday, 04:00 PM', details: 'Heavy crowd expected at Secunderabad Junction due to festival rush. Passengers are advised to reach the station at least 60 minutes before scheduled departure. Extra counters have been opened near the main entrance.' },
            { id: 'a5', category: 'alerts', type: 'rescheduled', title: '22691 - Rajdhani Express', tagLabel: 'Rescheduled', timestamp: 'Oct 15, 2024', subtitle: 'Late Arrival', details: 'Train rescheduled due to late arrival of pairing rake. Expected departure delay of 4 hours from Nizamuddin. Please check NTES app for live tracking.' },
            { id: '4', category: 'updates', type: 'special', title: 'Festival Special Trains 2024', tagLabel: 'Special Services', timestamp: 'Oct 12, 2024', subtitle: 'Diwali & Chhath Puja', details: 'To clear the extra rush of passengers during the upcoming festive season, Indian Railways will run 26 trips of Special Trains between Mumbai Central and Banaras. Booking opens on 15th October.', links: [{ label: 'View Schedule', url: '#' }, { label: 'Book Now', url: '#' }] },
            { id: '5', category: 'updates', type: 'info', title: 'Traffic Block: Western Railway', tagLabel: 'Maintenance', timestamp: 'Today, 08:00 AM', details: 'A major traffic block of 04:30 hrs will be undertaken for maintenance of track, signaling and overhead equipment on Up & Down fast lines between Borivali and Goregaon stations on Sunday.' },
            { id: '6', category: 'updates', type: 'restored', title: 'Restoration of Services', tagLabel: 'Service Update', timestamp: 'Yesterday, 06:30 PM', details: 'Train No. 19037/19038 Bandra Terminus - Gorakhpur Avadh Express which was earlier cancelled due to non-interlocking work at Surat yard has been restored and will run as per proper schedule.' },
            { id: 'u7', category: 'updates', type: 'info', title: 'Konkan Railway Monsoon Timetable', tagLabel: 'Schedule End', timestamp: 'Oct 01, 2024', details: 'The Monsoon timetable on Konkan Railway route will end on 31st Oct. Trains will revert to non-monsoon schedule starting Nov 1st. Passengers are requested to check revised timings.' },
            { id: '7', category: 'railway', type: 'news', title: 'New Vande Bharat Express Routes', tagLabel: 'Press Release', timestamp: 'Oct 10, 2024', details: 'Hon\'ble PM to flag off 9 new Vande Bharat Express trains connecting religious and tourist destinations across 11 states. These trains will provide world-class amenities and reduce travel time by up to 15%.', links: [{ label: 'Read Press Release', url: '#' }] },
            { id: '8', category: 'railway', type: 'news', title: 'Amrit Bharat Station Scheme', tagLabel: 'Infrastructure', timestamp: 'Oct 05, 2024', details: 'Redevelopment work has commenced at 508 railway stations across the country. The revamped stations will feature modern passenger amenities, roof plazas, and improved inter-modal connectivity.' },
            { id: 'r9', category: 'railway', type: 'news', title: 'Safety Drive Initiated', tagLabel: 'Safety', timestamp: 'Sep 28, 2024', details: 'A month-long intense safety drive has been launched across all zones to prevent fire incidents. Special focus on pantry cars and charging points within coaches.' },
            { id: '9', category: 'general', type: 'info', title: 'System Maintenance', tagLabel: 'Downtime Alert', timestamp: 'Oct 15, 2024', details: 'Ticketing services will be unavailable from 00:00 to 00:45 for scheduled server upgrades. PNR enquiry and Train Status services will continue to function normally.' },
            { id: '10', category: 'general', type: 'info', title: 'Revised Catering Charges', tagLabel: 'Policy Update', timestamp: 'Sep 01, 2024', details: 'The Ministry of Railways has revised the menu and tariff of catering services on Rajdhani, Shatabdi, and Duronto trains. Passengers can now opt for regional cuisines and diabetic-friendly meals.', links: [{ label: 'View Menu & Rates', url: '#' }] },
            { id: 'g11', category: 'general', type: 'info', title: 'Senior Citizen Concession', tagLabel: 'FAQ', timestamp: 'Aug 15, 2024', details: 'The parliamentary standing committee has recommended resuming senior citizen concessions for sleeper and 3AC classes. No official notification has been issued by the Ministry yet.' }
        ];

        const QUICK_LINKS_DATA = [
            { id: 'l1', title: 'PNR Status', description: 'Check reservation status', icon: 'search', url: '#', colorClass: 'bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400' },
            { id: 'l2', title: 'Book Ticket', description: 'Plan your journey', icon: 'ticket', url: '#', colorClass: 'bg-orange-50 text-orange-600 dark:bg-orange-900/20 dark:text-orange-400' },
            { id: 'l3', title: 'Train Schedule', description: 'Find train timings', icon: 'calendar', url: '#', colorClass: 'bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400' },
            { id: 'l4', title: 'Track Train', description: 'Live running status', icon: 'map-pin', url: '#', colorClass: 'bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400' },
            { id: 'l5', title: 'E-Catering', description: 'Order food on train', icon: 'utensils', url: '#', colorClass: 'bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400' },
            { id: 'l6', title: 'Ask Disha', description: '24x7 Virtual Help', icon: 'message-circle', url: '#', colorClass: 'bg-teal-50 text-teal-600 dark:bg-teal-900/20 dark:text-teal-400' },
            { id: 'l7', title: 'File TDR', description: 'Claim refund', icon: 'file-text', url: '#', colorClass: 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400' },
            { id: 'l8', title: 'Retiring Room', description: 'Book station stay', icon: 'hotel', url: '#', colorClass: 'bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20 dark:text-indigo-400' }
        ];

        const FILTERS = [
            { id: 'alerts', label: 'ALERTS', icon: 'bell' },
            { id: 'updates', label: 'UPDATES', icon: 'rotate-cw' },
            { id: 'general', label: 'GENERAL INFO', icon: 'info' },
            { id: 'links', label: 'QUICK LINKS', icon: 'link' },
            { id: 'railway', label: 'RAILWAY UPDATES', icon: 'train' }
        ];

        const STATUS_CONFIG = {
            rescheduled: { icon: 'clock', color: 'text-status-orange', bg: 'bg-status-orange/10' },
            platform_change: { icon: 'git-merge', color: 'text-status-teal', bg: 'bg-status-teal/10' },
            cancelled: { icon: 'x-circle', color: 'text-alert-red', bg: 'bg-alert-red/10' },
            info: { icon: 'info', color: 'text-status-grey', bg: 'bg-gray-100 dark:bg-gray-700' },
            restored: { icon: 'check-circle', color: 'text-status-green', bg: 'bg-status-green/10' },
            news: { icon: 'newspaper', color: 'text-blue-600', bg: 'bg-blue-50 dark:bg-blue-900/30' },
            special: { icon: 'star', color: 'text-purple-600', bg: 'bg-purple-50 dark:bg-purple-900/30' }
        };

        // --- STATE ---
        let activeFilter = 'alerts';
        let sortOrder = 'newest';
        
        // --- HELPERS ---
        const parseTimestamp = (timestampStr) => {
            const now = new Date();
            const str = timestampStr.toLowerCase();

            if (str.includes('today')) {
                const timeMatch = str.match(/(\d{1,2}):(\d{2})\s*(am|pm)/i);
                if (timeMatch) {
                    const [_, hours, minutes, period] = timeMatch;
                    let h = parseInt(hours);
                    if (period.toLowerCase() === 'pm' && h !== 12) h += 12;
                    if (period.toLowerCase() === 'am' && h === 12) h = 0;
                    const d = new Date(now);
                    d.setHours(h, parseInt(minutes), 0, 0);
                    return d.getTime();
                }
                return now.getTime();
            }

            if (str.includes('yesterday')) {
                const yesterday = new Date(now);
                yesterday.setDate(yesterday.getDate() - 1);
                const timeMatch = str.match(/(\d{1,2}):(\d{2})\s*(am|pm)/i);
                if (timeMatch) {
                    const [_, hours, minutes, period] = timeMatch;
                    let h = parseInt(hours);
                    if (period.toLowerCase() === 'pm' && h !== 12) h += 12;
                    if (period.toLowerCase() === 'am' && h === 12) h = 0;
                    yesterday.setHours(h, parseInt(minutes), 0, 0);
                    return yesterday.getTime();
                }
                return yesterday.getTime();
            }

            const cleanStr = timestampStr
                .replace(/^scheduled:\s*/i, '')
                .replace(/(\d+)(st|nd|rd|th)/, '$1');
            const parsed = Date.parse(cleanStr);
            return isNaN(parsed) ? 0 : parsed;
        };

        const renderDetails = (text) => {
             // Mock highlighting logic
             const parts = text.split(/(02:30 hrs|Platform 5|fully cancelled|Special Trains)/g);
             return parts.map(part => {
                if (part === '02:30 hrs') return `<span class="font-bold text-status-orange">${part}</span>`;
                if (part === 'Platform 5') return `<span class="font-bold">${part}</span>`;
                if (part === 'fully cancelled') return `<span class="font-bold text-alert-red">${part}</span>`;
                if (part === 'Special Trains') return `<span class="font-bold text-purple-600">${part}</span>`;
                return part;
             }).join('');
        };

        // --- RENDER FUNCTIONS ---
        const renderFilters = () => {
            const container = document.getElementById('filter-container');
            container.innerHTML = FILTERS.map(filter => {
                const isActive = activeFilter === filter.id;
                return `
                    <button
                        onclick="setFilter('${filter.id}')"
                        class="flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium shrink-0 transition-all duration-200 ${
                            isActive 
                            ? 'bg-primary text-white shadow-md shadow-primary/20 hover:scale-105 active:scale-95 font-bold' 
                            : 'bg-white dark:bg-surface-dark text-text-main dark:text-gray-300 border border-gray-100 dark:border-gray-700 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700'
                        }"
                    >
                        <i data-lucide="${filter.icon}" class="w-[18px] h-[18px]"></i>
                        ${filter.label}
                    </button>
                `;
            }).join('');
            if (window.lucide) lucide.createIcons();
            
            // Check scroll after rendering
            setTimeout(checkScrollIndicators, 100);
        };

        const renderQuickLinks = () => {
             const html = `
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 animate-slideDown">
                    ${QUICK_LINKS_DATA.map(link => `
                        <a href="${link.url}" class="group flex flex-col items-center justify-center p-6 bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-transparent hover:border-primary/20 hover:shadow-md transition-all duration-200 cursor-pointer">
                            <div class="mb-3 size-12 rounded-full flex items-center justify-center transition-transform group-hover:scale-110 ${link.colorClass}">
                                <i data-lucide="${link.icon}" class="w-6 h-6"></i>
                            </div>
                            <h3 class="text-base font-bold text-text-main dark:text-gray-100 mb-1 text-center group-hover:text-primary transition-colors">${link.title}</h3>
                            <p class="text-xs text-text-muted dark:text-gray-400 text-center font-medium">${link.description}</p>
                        </a>
                    `).join('')}
                </div>
             `;
             return html;
        };

        const renderAlerts = () => {
            const filtered = CONTENT_DATA.filter(item => item.category === activeFilter);
            const sorted = filtered.sort((a, b) => {
                const timeA = parseTimestamp(a.timestamp);
                const timeB = parseTimestamp(b.timestamp);
                return sortOrder === 'newest' ? timeB - timeA : timeA - timeB;
            });

            if (sorted.length === 0) {
                return `
                    <div class="flex flex-col items-center justify-center py-16 text-center animate-slideDown">
                        <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-full mb-4">
                            <i data-lucide="inbox" class="w-8 h-8 text-gray-400"></i>
                        </div>
                        <h3 class="text-lg font-bold text-text-main dark:text-gray-200">No updates available</h3>
                        <p class="text-text-muted dark:text-gray-500 max-w-xs mt-1">There are currently no active alerts for this category. Check back later.</p>
                    </div>
                `;
            }

            return `
                <div class="space-y-4 animate-slideDown">
                    ${sorted.map((alert, index) => {
                        const config = STATUS_CONFIG[alert.type] || STATUS_CONFIG.info;
                        // Default open the first item
                        const isOpen = index === 0; 
                        return `
                        <div class="group bg-surface-light dark:bg-surface-dark rounded-lg shadow-[0_2px_8px_rgba(0,0,0,0.04)] border border-transparent hover:border-primary/20 transition-all duration-200 ${isOpen ? 'ring-1 ring-primary/20' : ''}" data-id="${alert.id}">
                            <div class="cursor-pointer p-5 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between" onclick="toggleAccordion('${alert.id}')">
                                <div class="flex items-start gap-4 flex-1">
                                    <div class="hidden sm:flex size-10 shrink-0 items-center justify-center rounded-full ${config.bg} ${config.color}">
                                        <i data-lucide="${config.icon}" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <div class="flex flex-wrap items-center gap-3 mb-1">
                                            <h3 class="text-lg font-bold text-text-main dark:text-gray-100">${alert.title}</h3>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold ${config.bg} ${config.color}">${alert.tagLabel}</span>
                                        </div>
                                        <p class="text-sm text-text-muted dark:text-gray-400 font-medium">${alert.timestamp} ${alert.subtitle ? `â€¢ ${alert.subtitle}` : ''}</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-end">
                                    <p class="sm:hidden text-sm text-text-main font-medium line-clamp-1 opacity-70 toggle-text ${isOpen ? 'hidden' : 'block'}">Tap to view details...</p>
                                    <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}" id="icon-${alert.id}"></i>
                                </div>
                            </div>
                            <div class="accordion-content ${isOpen ? 'open' : ''}" id="content-${alert.id}">
                                <div class="accordion-inner">
                                    <div class="px-5 pb-5 pt-0 sm:pl-[72px]">
                                        <div class="h-px w-full bg-gray-100 dark:bg-gray-700 mb-4"></div>
                                        <p class="text-text-main dark:text-gray-300 leading-relaxed max-w-3xl">${renderDetails(alert.details)}</p>
                                        ${alert.links ? `
                                            <div class="mt-4 flex gap-3">
                                                ${alert.links.map((link, idx) => `
                                                    <button class="text-xs font-bold text-primary hover:underline">${link.label}</button>
                                                    ${idx < alert.links.length - 1 ? '<span class="text-gray-300 dark:text-gray-600">|</span>' : ''}
                                                `).join('')}
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                        `;
                    }).join('')}
                </div>
            `;
        };

        const renderMain = () => {
            const container = document.getElementById('main-content');
            const loadMoreContainer = document.getElementById('load-more-container');
            
            if (activeFilter === 'links') {
                container.innerHTML = renderQuickLinks();
                loadMoreContainer.classList.add('hidden');
            } else {
                container.innerHTML = renderAlerts();
                const hasItems = CONTENT_DATA.some(item => item.category === activeFilter);
                if (hasItems) {
                    loadMoreContainer.classList.remove('hidden');
                } else {
                    loadMoreContainer.classList.add('hidden');
                }
            }
            if (window.lucide) lucide.createIcons();
        };

        // --- SCROLL INDICATOR LOGIC ---
        const checkScrollIndicators = () => {
            const container = document.getElementById('filter-container');
            const leftBtn = document.getElementById('scroll-left-btn');
            const rightBtn = document.getElementById('scroll-right-btn');

            if (!container || !leftBtn || !rightBtn) return;

            // Show left if scrolled right
            if (container.scrollLeft > 10) {
                leftBtn.disabled = false;
            } else {
                leftBtn.disabled = true;
            }

            // Show right if can scroll right
            if (container.scrollWidth - container.scrollLeft - container.clientWidth > 2) {
                rightBtn.disabled = false;
            } else {
                rightBtn.disabled = true;
            }
        };

        // --- ACTIONS ---
        window.setFilter = (id) => {
            activeFilter = id;
            renderFilters();
            renderMain();
        };

        window.toggleAccordion = (id) => {
            const content = document.getElementById(`content-${id}`);
            const icon = document.getElementById(`icon-${id}`);
            const toggleText = content.parentElement.querySelector('.toggle-text');
            
            content.classList.toggle('open');
            icon.classList.toggle('rotate-180');
            if(toggleText) toggleText.classList.toggle('hidden');
            
            // Add ring to parent when open for better focus state
            const parent = content.parentElement;
            if (content.classList.contains('open')) {
                parent.classList.add('ring-1', 'ring-primary/20');
            } else {
                parent.classList.remove('ring-1', 'ring-primary/20');
            }
        };

        // --- INIT & LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            // Theme Init
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }

            // Theme Toggle
            const toggleTheme = () => document.documentElement.classList.toggle('dark');
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
            document.getElementById('mobile-theme-toggle').addEventListener('click', toggleTheme);

            // Sort Listener
            document.getElementById('sort-select').addEventListener('change', (e) => {
                sortOrder = e.target.value;
                renderMain();
            });

            // Date Init
            document.getElementById('date-input').valueAsDate = new Date();

            // Load More Mock
            const btn = document.getElementById('load-more-btn');
            const btnText = document.getElementById('load-more-text');
            const btnIcon = btn.querySelector('i');
            
            btn.addEventListener('click', () => {
                btn.disabled = true;
                btnText.textContent = "Loading...";
                btnIcon.classList.add('animate-spin');
                setTimeout(() => {
                    btn.disabled = false;
                    btnText.textContent = "Load More";
                    btnIcon.classList.remove('animate-spin');
                }, 1500);
            });

            // Scroll to Top Logic
            const scrollTopBtn = document.getElementById('scroll-to-top');
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    scrollTopBtn.classList.remove('opacity-0', 'invisible', 'translate-y-10');
                    scrollTopBtn.classList.add('opacity-100', 'visible', 'translate-y-0');
                } else {
                    scrollTopBtn.classList.add('opacity-0', 'invisible', 'translate-y-10');
                    scrollTopBtn.classList.remove('opacity-100', 'visible', 'translate-y-0');
                }
            });

            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Scroll Button Logic
            const filterContainer = document.getElementById('filter-container');
            const leftBtn = document.getElementById('scroll-left-btn');
            const rightBtn = document.getElementById('scroll-right-btn');
            
            leftBtn.addEventListener('click', () => {
                filterContainer.scrollBy({ left: -200, behavior: 'smooth' });
            });
            
            rightBtn.addEventListener('click', () => {
                filterContainer.scrollBy({ left: 200, behavior: 'smooth' });
            });
            
            filterContainer.addEventListener('scroll', checkScrollIndicators);
            window.addEventListener('resize', checkScrollIndicators);

            // Initial Render
            renderFilters();
            renderMain();
        });

    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>